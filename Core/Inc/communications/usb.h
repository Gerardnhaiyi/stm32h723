/***********************************************************************************************************************************
 *  File name        : usb.h
 *  Author           : GGT Nesselaar
 *
 *  Compiler         : STM32CubeIDE
 *  Manufacturer     : STMicroelectronics
 *  CreationDate     : Dec 6, 2023
 *
 **********************************************************************************************************************************/
#ifndef INC_COMMUNICATIONS_USB_H_
/***********************************************************************************************************************************
 *    Used defines :
 **********************************************************************************************************************************/
    #define	INC_COMMUNICATIONS_USB_H_

#ifdef __cplusplus
	extern "C" {
#endif

/***********************************************************************************************************************************
 *    Used includes :
 **********************************************************************************************************************************/
	#include <stdint.h>
	#include <generic.h>
	#include "pins.h"
	#include <stdbool.h>
	#include <string.h>
	#include "gpio.h"
	#include "usbd_cdc_if.h"

/***********************************************************************************************************************************
 *  Used constants    :
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *	 enum name         :
 *
 *   enum Description  :
 *
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *	 array name        :
 *
 *   array Description :
 *
 **********************************************************************************************************************************/
//	uint8_t usbTxBuffer[msgLngthMax]; //buffer

/***********************************************************************************************************************************
 *	 struct name        : usbRxSt
 *
 *	 struct Description : usb receive struct
 *
 **********************************************************************************************************************************/
	typedef struct
	{
		uint8_t usbRxBuffer[msgLngthMax]; //buffer
		uint8_t usbRxDataLen; //actual length of data in the buffer, automatic by fill buffer
		bool usbRxAvailable;
	}usbRxSt;

	extern usbRxSt usbData;

/***********************************************************************************************************************************
 *	 Class name        : usb
 *
 *	 Class Description : class of the usb communication port
 *
 *	 Inheritance       : None
 *
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *  Variablen         :
 **********************************************************************************************************************************/
//	uint32_t usbTrnTime; //Time for serial transmission

/***********************************************************************************************************************************
 *  Prototypes         :
 **********************************************************************************************************************************/
	uint8_t transmitUsbCdc(uint8_t *Buf, uint16_t Len);
//	void receiveUsbCdc(void);

#ifdef __cplusplus
	}
#endif

#endif /* INC_COMMUNICATIONS_USB_H_ */
